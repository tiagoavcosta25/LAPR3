<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2939px" preserveAspectRatio="none" style="width:3436px;height:2939px;" version="1.1" viewBox="0 0 3436 2939" width="3436px" zoomAndPan="magnify"><defs><filter height="300%" id="fah43y02bt1wz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="2812.3203" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="39" y="97.6094"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="1324.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="119.9609"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="90.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1474.7109"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1602.7656"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="447.1172" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1693.4688"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="224.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="2170.9375"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="467.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="2442.1016"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="1190.6406" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="150.3125"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="1505.0625"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="370.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="1723.8203"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="90.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2201.2891"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2472.4531"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="90.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2539.8047"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="201.3672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2708.5625"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="850" y="180.6641"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="970" y="241.0156"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="970" y="628.5625"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1086.5" y="301.3672"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1199.5" y="371.7188"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1199.5" y="490.1563"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1199.5" y="2231.6406"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1518.5" y="520.5078"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1518.5" y="2261.9922"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1610" y="688.9141"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1729" y="759.2656"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="252.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1729" y="877.7031"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2037" y="908.0547"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2161" y="1084.8125"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2292" y="1162.1641"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2292" y="1280.6016"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2607" y="1310.9531"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2715" y="1764.1719"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="211.2734" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2715" y="1882.6094"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2715" y="2570.1563"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2874" y="2600.5078"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="154.5703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2988.5" y="1939.3125"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3198.5" y="2063.8828"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3329.5" y="2785.5234"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="78.7031" style="stroke: #000000; stroke-width: 2.0;" width="580" x="1658" y="1044.1094"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="169.7578" style="stroke: #000000; stroke-width: 2.0;" width="784" x="13" y="1403.6563"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="155.7578" style="stroke: #000000; stroke-width: 2.0;" width="784" x="13" y="2354.6953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="44" x2="44" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="384" x2="384" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="703" x2="703" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="855" x2="855" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="975" x2="975" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1091" x2="1091" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1204" x2="1204" y1="381.4766" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1523" x2="1523" y1="445.6953" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1615" x2="1615" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1734" x2="1734" y1="769.0234" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2042" x2="2042" y1="833.2422" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2166" x2="2166" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2297" x2="2297" y1="1171.9219" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2612" x2="2612" y1="1236.1406" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2720" x2="2720" y1="1773.9297" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2879" x2="2879" y1="1838.1484" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2993" x2="2993" y1="1932.7188" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3203.5" x2="3203.5" y1="87.6094" y2="2927.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3334.5" x2="3334.5" y1="2749.8672" y2="2927.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="23" y="84.5332">Client</text><ellipse cx="44" cy="13" fill="#FEFECE" filter="url(#fah43y02bt1wz)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44,21 L44,48 M31,29 L57,29 M44,48 L31,63 M44,48 L57,63 " fill="none" filter="url(#fah43y02bt1wz)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="325" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="332" y="72.5332">MakeAnOrderUI</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="619" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="626" y="72.5332">MakeAnOrderController</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="801" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="808" y="72.5332">PotApplication</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="919" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="961" y="54.9238">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="926" y="72.5332">:PotApplication</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1041" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="1065.5" y="54.9238">session</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1048" y="72.5332">:UserSession</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="1572" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1583" y="54.9238">worldMap</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="1579" y="72.5332">:WorldMap</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="2104" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="2111" y="72.5332">GraphAlgorithms</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="3174.5" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="3185" y="54.9238">client</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="3181.5" y="72.5332">:Client</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="2812.3203" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="39" y="97.6094"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="1324.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="119.9609"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="90.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1474.7109"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1602.7656"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="447.1172" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="1693.4688"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="224.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="2170.9375"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="467.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="2442.1016"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="1190.6406" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="150.3125"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="1505.0625"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="370.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="1723.8203"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="90.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2201.2891"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2472.4531"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="90.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2539.8047"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="201.3672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="2708.5625"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="850" y="180.6641"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="970" y="241.0156"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="970" y="628.5625"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1086.5" y="301.3672"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1199.5" y="371.7188"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1199.5" y="490.1563"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1199.5" y="2231.6406"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1518.5" y="520.5078"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1518.5" y="2261.9922"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1610" y="688.9141"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1729" y="759.2656"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="252.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1729" y="877.7031"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2037" y="908.0547"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2161" y="1084.8125"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2292" y="1162.1641"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2292" y="1280.6016"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2607" y="1310.9531"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2715" y="1764.1719"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="211.2734" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2715" y="1882.6094"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2715" y="2570.1563"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2874" y="2600.5078"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="154.5703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2988.5" y="1939.3125"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3198.5" y="2063.8828"/><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3329.5" y="2785.5234"/><polygon fill="#A80036" points="367,115.9609,377,119.9609,367,123.9609,371,119.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="373" y1="119.9609" y2="119.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="56" y="115.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="67" y="115.1045">sends a request to make an order</text><polygon fill="#A80036" points="686,146.3125,696,150.3125,686,154.3125,690,150.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="150.3125" y2="150.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="396" y="145.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="407" y="145.4561">lstProducts = getAvailableProducts(pharmacy)</text><polygon fill="#A80036" points="838,176.6641,848,180.6641,838,184.6641,842,180.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="844" y1="180.6641" y2="180.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="715" y="175.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="726" y="175.8076">app = getInstance()</text><polygon fill="#A80036" points="958,237.0156,968,241.0156,958,245.0156,962,241.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="964" y1="241.0156" y2="241.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="715" y="236.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="726" y="236.1592">session = getCurrentSession()</text><polygon fill="#A80036" points="1074.5,297.3672,1084.5,301.3672,1074.5,305.3672,1078.5,301.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1080.5" y1="301.3672" y2="301.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="715" y="296.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="726" y="296.5107">email = getUserEmail()</text><polygon fill="#A80036" points="1140,357.7188,1150,361.7188,1140,365.7188,1144,361.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1146" y1="361.7188" y2="361.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="715" y="356.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="726" y="356.8623">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="1152" y="339.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="1171.5" y="360.9004">clientServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1159" y="378.5098">:ClientService</text><polygon fill="#A80036" points="1473,421.9375,1483,425.9375,1473,429.9375,1477,425.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1204.5" x2="1479" y1="425.9375" y2="425.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1211.5" y="421.0811">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1222.5" y="421.0811">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="1485" y="403.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="1495.5" y="425.1191">clientDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1492" y="442.7285">:ClientDB</text><polygon fill="#A80036" points="1187.5,486.1563,1197.5,490.1563,1187.5,494.1563,1191.5,490.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1193.5" y1="490.1563" y2="490.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="715" y="485.2998">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="726" y="485.2998">client = getUserByEmail(email)</text><polygon fill="#A80036" points="1506.5,516.5078,1516.5,520.5078,1506.5,524.5078,1510.5,520.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1209.5" x2="1512.5" y1="520.5078" y2="520.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1216.5" y="515.6514">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="1227.5" y="515.6514">client = getUserByEmail(email)</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1482" y="558.5078"/><polygon fill="#EEEEEE" points="1482,558.5078,1544,558.5078,1544,566.5078,1534,576.5078,1482,576.5078,1482,558.5078" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1495" y="574.0029">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1488" y="594.0029">SD_CONNECTIONS</text><polygon fill="#A80036" points="958,624.5625,968,628.5625,958,632.5625,962,628.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="964" y1="628.5625" y2="628.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="623.7061">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="733" y="623.7061">worldMap = getWorldMap()</text><polygon fill="#A80036" points="1598,684.9141,1608,688.9141,1598,692.9141,1602,688.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1604" y1="688.9141" y2="688.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="684.0576">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="733" y="684.0576">graph = getGraph()</text><polygon fill="#A80036" points="1656,745.2656,1666,749.2656,1656,753.2656,1660,749.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1662" y1="749.2656" y2="749.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="744.4092">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="733" y="744.4092">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="1668" y="726.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="1686.5" y="748.4473">pharmacyServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1675" y="766.0566">:PharmacyService</text><polygon fill="#A80036" points="1978,809.4844,1988,813.4844,1978,817.4844,1982,813.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1734" x2="1984" y1="813.4844" y2="813.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1741" y="808.6279">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1759" y="808.6279">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="1990" y="791.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="1999.5" y="812.666">pharmacyDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1997" y="830.2754">:PharmacyDB</text><polygon fill="#A80036" points="1717,873.7031,1727,877.7031,1717,881.7031,1721,877.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1723" y1="877.7031" y2="877.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="872.8467">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="733" y="872.8467">pharmacy = getClosestPharmacyToClient(graph, client)</text><polygon fill="#A80036" points="2025,904.0547,2035,908.0547,2025,912.0547,2029,908.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1739" x2="2031" y1="908.0547" y2="908.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1746" y="903.1982">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="1764" y="903.1982">lstPharmacies = getPharmacies()</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1987" y="946.0547"/><polygon fill="#EEEEEE" points="1987,946.0547,2049,946.0547,2049,954.0547,2039,964.0547,1987,964.0547,1987,946.0547" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="2000" y="961.5498">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1993" y="981.5498">SD_CONNECTIONS</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1739" x2="1781" y1="1016.1094" y2="1016.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1781" x2="1781" y1="1016.1094" y2="1029.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1740" x2="1781" y1="1029.1094" y2="1029.1094"/><polygon fill="#A80036" points="1750,1025.1094,1740,1029.1094,1750,1033.1094,1746,1029.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1746" y="1011.2529">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="1764" y="1011.2529">getClosestPharmacy(address, lstPharmacies)</text><path d="M1658,1044.1094 L1731,1044.1094 L1731,1052.1094 L1721,1062.1094 L1658,1062.1094 L1658,1044.1094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="78.7031" style="stroke: #000000; stroke-width: 2.0;" width="580" x="1658" y="1044.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1673" y="1058.6045">loop</text><polygon fill="#A80036" points="2149,1080.8125,2159,1084.8125,2149,1088.8125,2153,1084.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1739" x2="2155" y1="1084.8125" y2="1084.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1746" y="1079.9561">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="379" x="1764" y="1079.9561">distance = shortestPath(graph, clientAddress, pharmacyAddress)</text><polygon fill="#A80036" points="2226,1148.1641,2236,1152.1641,2226,1156.1641,2230,1152.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="2232" y1="1152.1641" y2="1152.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="1147.3076">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="733" y="1147.3076">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="2238" y="1129.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="2256.5" y="1151.3457">productServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="2245" y="1168.9551">:ProductService</text><polygon fill="#A80036" points="2555,1212.3828,2565,1216.3828,2555,1220.3828,2559,1216.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2297" x2="2561" y1="1216.3828" y2="1216.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="2304" y="1211.5264">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="2322" y="1211.5264">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="2567" y="1194.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="2576.5" y="1215.5645">productDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="2574" y="1233.1738">:ProductDB</text><polygon fill="#A80036" points="2280,1276.6016,2290,1280.6016,2280,1284.6016,2284,1280.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="2286" y1="1280.6016" y2="1280.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="1275.7451">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="733" y="1275.7451">lstProducts = getAvailableProducts(pharmacy)</text><polygon fill="#A80036" points="2595,1306.9531,2605,1310.9531,2595,1314.9531,2599,1310.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2302" x2="2601" y1="1310.9531" y2="1310.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="2309" y="1306.0967">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="2327" y="1306.0967">lstProducts = getAvailableProducts(pharmacy)</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="2564" y="1348.9531"/><polygon fill="#EEEEEE" points="2564,1348.9531,2626,1348.9531,2626,1356.9531,2616,1366.9531,2564,1366.9531,2564,1348.9531" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="2577" y="1364.4482">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="2570" y="1384.4482">SD_CONNECTIONS</text><path d="M13,1403.6563 L86,1403.6563 L86,1411.6563 L76,1421.6563 L13,1421.6563 L13,1403.6563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="169.7578" style="stroke: #000000; stroke-width: 2.0;" width="784" x="13" y="1403.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="1418.1514">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="101" y="1417.0752">[until there is no more products to add]</text><polygon fill="#A80036" points="60,1440.3594,50,1444.3594,60,1448.3594,56,1444.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="383" y1="1444.3594" y2="1444.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="66" y="1439.5029">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="84" y="1439.5029">shows the list of the available products</text><polygon fill="#A80036" points="367,1470.7109,377,1474.7109,367,1478.7109,371,1474.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="373" y1="1474.7109" y2="1474.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="56" y="1469.8545">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="74" y="1469.8545">chooses which product and which quantity to order</text><polygon fill="#A80036" points="686,1501.0625,696,1505.0625,686,1509.0625,690,1505.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="1505.0625" y2="1505.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="396" y="1500.2061">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="414" y="1500.2061">addProductToOrder(product, quantity)</text><polygon fill="#A80036" points="60,1561.4141,50,1565.4141,60,1569.4141,56,1565.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="383" y1="1565.4141" y2="1565.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="66" y="1560.5576">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="84" y="1560.5576">asks if the user is done adding more products</text><polygon fill="#A80036" points="367,1598.7656,377,1602.7656,367,1606.7656,371,1602.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="373" y1="1602.7656" y2="1602.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="56" y="1597.9092">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="74" y="1597.9092">confirms that there is not more products</text><polygon fill="#A80036" points="60,1659.1172,50,1663.1172,60,1667.1172,56,1663.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="383" y1="1663.1172" y2="1663.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="66" y="1658.2607">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="84" y="1658.2607">asks if it is a home delivery or a store pick up</text><polygon fill="#A80036" points="367,1689.4688,377,1693.4688,367,1697.4688,371,1693.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="373" y1="1693.4688" y2="1693.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="56" y="1688.6123">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="74" y="1688.6123">chooses the delivery type</text><polygon fill="#A80036" points="686,1719.8203,696,1723.8203,686,1727.8203,690,1723.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="1723.8203" y2="1723.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="396" y="1718.9639">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="414" y="1718.9639">newOrder(description, isHomeDelivery)</text><polygon fill="#A80036" points="2655,1750.1719,2665,1754.1719,2655,1758.1719,2659,1754.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="2661" y1="1754.1719" y2="1754.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="1749.3154">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="733" y="1749.3154">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="2667" y="1731.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="2686.5" y="1753.3535">orderServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="2674" y="1770.9629">:OrderService</text><polygon fill="#A80036" points="2828,1814.3906,2838,1818.3906,2828,1822.3906,2832,1818.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2720" x2="2834" y1="1818.3906" y2="1818.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="2727" y="1813.5342">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="2745" y="1813.5342">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="2840" y="1796.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="2850.5" y="1817.5723">orderDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="2847" y="1835.1816">:OrderDB</text><polygon fill="#A80036" points="2703,1878.6094,2713,1882.6094,2703,1886.6094,2707,1882.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="2709" y1="1882.6094" y2="1882.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="1877.7529">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="455" x="733" y="1877.7529">order = addOrder(description, mapProducts, client, pharmacy, isHomeDelivery)</text><polygon fill="#A80036" points="2952,1925.3125,2962,1929.3125,2952,1933.3125,2956,1929.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2725" x2="2958" y1="1929.3125" y2="1929.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="2732" y="1916.2803">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="2750" y="1908.1045">create(description, mapProducts,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="2750" y="1924.4561">client, pharmacy, isHomeDelivery)</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="2964" y="1890.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="2974.5" y="1912.1426">order</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="2971" y="1929.752">:Order</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2998.5" x2="3040.5" y1="1977.1797" y2="1977.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3040.5" x2="3040.5" y1="1977.1797" y2="1990.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2999.5" x2="3040.5" y1="1990.1797" y2="1990.1797"/><polygon fill="#A80036" points="3009.5,1986.1797,2999.5,1990.1797,3009.5,1994.1797,3005.5,1990.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="3005.5" y="1972.3232">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="3023.5" y="1972.3232">calculateAmount()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2998.5" x2="3040.5" y1="2020.5313" y2="2020.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3040.5" x2="3040.5" y1="2020.5313" y2="2033.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2999.5" x2="3040.5" y1="2033.5313" y2="2033.5313"/><polygon fill="#A80036" points="3009.5,2029.5313,2999.5,2033.5313,3009.5,2037.5313,3005.5,2033.5313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="3005.5" y="2015.6748">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="3023.5" y="2015.6748">calculateTotalWeight()</text><polygon fill="#A80036" points="3186.5,2059.8828,3196.5,2063.8828,3186.5,2067.8828,3190.5,2063.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2998.5" x2="3192.5" y1="2063.8828" y2="2063.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="3005.5" y="2059.0264">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="3023.5" y="2059.0264">addCredits(addtionalCredits)</text><polygon fill="#A80036" points="60,2136.5859,50,2140.5859,60,2144.5859,56,2140.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="383" y1="2140.5859" y2="2140.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="66" y="2127.5537">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="84" y="2119.3779">validates, presents the information with the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="84" y="2135.7295">total price of the order and asks for confirmation</text><polygon fill="#A80036" points="367,2166.9375,377,2170.9375,367,2174.9375,371,2170.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="373" y1="2170.9375" y2="2170.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="56" y="2166.0811">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="74" y="2166.0811">confirms</text><polygon fill="#A80036" points="686,2197.2891,696,2201.2891,686,2205.2891,690,2201.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="2201.2891" y2="2201.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="396" y="2196.4326">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="414" y="2196.4326">lstCreditCards = getCreditCardsByClient(email)</text><polygon fill="#A80036" points="1187.5,2227.6406,1197.5,2231.6406,1187.5,2235.6406,1191.5,2231.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="1193.5" y1="2231.6406" y2="2231.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="2226.7842">40</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="733" y="2226.7842">lstCreditCards = getCreditCardsByClient(email)</text><polygon fill="#A80036" points="1506.5,2257.9922,1516.5,2261.9922,1506.5,2265.9922,1510.5,2261.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1209.5" x2="1512.5" y1="2261.9922" y2="2261.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1216.5" y="2257.1357">41</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="1234.5" y="2257.1357">lstCreditCards = getCreditCardsByClient(email)</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1482" y="2299.9922"/><polygon fill="#EEEEEE" points="1482,2299.9922,1544,2299.9922,1544,2307.9922,1534,2317.9922,1482,2317.9922,1482,2299.9922" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1495" y="2315.4873">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1488" y="2335.4873">SD_CONNECTIONS</text><path d="M13,2354.6953 L86,2354.6953 L86,2362.6953 L76,2372.6953 L13,2372.6953 L13,2354.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="155.7578" style="stroke: #000000; stroke-width: 2.0;" width="784" x="13" y="2354.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="2369.1904">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167" x="101" y="2368.1143">[until the full amount is payed]</text><polygon fill="#A80036" points="60,2391.3984,50,2395.3984,60,2399.3984,56,2395.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="383" y1="2395.3984" y2="2395.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="66" y="2390.542">42</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="84" y="2390.542">shows the list of his registered credit cards</text><polygon fill="#A80036" points="367,2438.1016,377,2442.1016,367,2446.1016,371,2442.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="373" y1="2442.1016" y2="2442.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="56" y="2429.0693">43</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="74" y="2420.8936">chooses which credit card to use in order</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="74" y="2437.2451">pay the order and the amount for said card</text><polygon fill="#A80036" points="686,2468.4531,696,2472.4531,686,2476.4531,690,2472.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="2472.4531" y2="2472.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="396" y="2467.5967">44</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="414" y="2467.5967">addPayment(creditCard, amount)</text><polygon fill="#A80036" points="686,2535.8047,696,2539.8047,686,2543.8047,690,2539.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="2539.8047" y2="2539.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="396" y="2534.9482">45</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="414" y="2534.9482">registerOrder()</text><polygon fill="#A80036" points="2703,2566.1563,2713,2570.1563,2703,2574.1563,2707,2570.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="2709" y1="2570.1563" y2="2570.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="2565.2998">46</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="733" y="2565.2998">registerOrder(order)</text><polygon fill="#A80036" points="2862,2596.5078,2872,2600.5078,2862,2604.5078,2866,2600.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2725" x2="2868" y1="2600.5078" y2="2600.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="2732" y="2595.6514">47</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="2750" y="2595.6514">registerOrder(order)</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="2837" y="2638.5078"/><polygon fill="#EEEEEE" points="2837,2638.5078,2899,2638.5078,2899,2646.5078,2889,2656.5078,2837,2656.5078,2837,2638.5078" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="2850" y="2654.0029">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="2843" y="2674.0029">SD_CONNECTIONS</text><polygon fill="#A80036" points="686,2704.5625,696,2708.5625,686,2712.5625,690,2708.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="2708.5625" y2="2708.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="396" y="2703.7061">48</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="414" y="2703.7061">generateInvoice()</text><polygon fill="#A80036" points="3230.5,2734.9141,3240.5,2738.9141,3230.5,2742.9141,3234.5,2738.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="3236.5" y1="2738.9141" y2="2738.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="2734.0576">49</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="733" y="2734.0576">create()</text><rect fill="#FEFECE" filter="url(#fah43y02bt1wz)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="3242.5" y="2716.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="3249.5" y="2738.0957">GenerateInvoiceController</text><polygon fill="#A80036" points="3317.5,2781.5234,3327.5,2785.5234,3317.5,2789.5234,3321.5,2785.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="708" x2="3323.5" y1="2785.5234" y2="2785.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="715" y="2780.667">50</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="733" y="2780.667">generateInvoice(order, mapPayments)</text><rect fill="#FFFFFF" filter="url(#fah43y02bt1wz)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="186" x="3239.5" y="2823.5234"/><polygon fill="#EEEEEE" points="3239.5,2823.5234,3301.5,2823.5234,3301.5,2831.5234,3291.5,2841.5234,3239.5,2841.5234,3239.5,2823.5234" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="3252.5" y="2839.0186">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="3306" y="2859.0186">US26_SD</text><polygon fill="#A80036" points="55,2905.9297,45,2909.9297,55,2913.9297,51,2909.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="383" y1="2909.9297" y2="2909.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="61" y="2896.8975">51</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="79" y="2888.7217">registers the order, generates the invoice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="83" y="2905.0732">and informs of the success of the operation</text><!--MD5=[521fb3c83cdfd6e3d055ed5b06ddaa9c]
@startuml
autonumber
hide footbox

actor "Client" as CL

participant "MakeAnOrderUI" as UI
participant "MakeAnOrderController" as CTRL
participant "PotApplication" as _APP
participant "app\n:PotApplication" as APP
participant "session\n:UserSession" as SESSION
participant "clientServ\n:ClientService" as CS
participant "clientDB\n:ClientDB" as CDB
participant "worldMap\n:WorldMap" as WM
participant "pharmacyServ\n:PharmacyService" as PHS
participant "pharmacyDB\n:PharmacyDB" as PHDB
participant "GraphAlgorithms" as GA
participant "productServ\n:ProductService" as PS
participant "productDB\n:ProductDB" as PDB
participant "orderServ\n:OrderService" as OS
participant "orderDB\n:OrderDB" as ODB
participant "order\n:Order" as O
participant "client\n:Client" as C
participant "GenerateInvoiceController" as INVCTRL

activate CL

CL -> UI : sends a request to make an order
activate UI
UI -> CTRL : lstProducts = getAvailableProducts(pharmacy)
activate CTRL
CTRL -> _APP: app = getInstance()
activate _APP
deactivate _APP

CTRL -> APP: session = getCurrentSession()
activate APP
deactivate APP

CTRL -> SESSION: email = getUserEmail()
activate SESSION
deactivate SESSION
CTRL -> CS** : create()
activate CS
CS -> CDB** : create()
deactivate CS
CTRL -> CS : client = getUserByEmail(email)
activate CS
CS -> CDB : client = getUserByEmail(email)
activate CDB
ref over CDB
SD_CONNECTIONS
end ref
deactivate CDB
deactivate CS

CTRL -> APP: worldMap = getWorldMap()
activate APP
deactivate APP

CTRL -> WM: graph = getGraph()
activate WM
deactivate WM

CTRL -> PHS** : create()
activate PHS
PHS -> PHDB** : create()
deactivate PHS
CTRL -> PHS : pharmacy = getClosestPharmacyToClient(graph, client)
activate PHS
PHS -> PHDB : lstPharmacies = getPharmacies()
activate PHDB
ref over PHDB
SD_CONNECTIONS
end ref
deactivate PHDB
PHS -> PHS : getClosestPharmacy(address, lstPharmacies)
loop
PHS -> GA : distance = shortestPath(graph, clientAddress, pharmacyAddress)
activate GA
deactivate GA
end loop
deactivate PHS
CTRL -> PS** : create()
activate PS
PS -> PDB** : create()
deactivate PS
CTRL -> PS : lstProducts = getAvailableProducts(pharmacy)
activate PS
PS -> PDB : lstProducts = getAvailableProducts(pharmacy)
activate PDB
ref over PDB
SD_CONNECTIONS
end ref
deactivate PDB
deactivate PS
deactivate CTRL
loop until there is no more products to add
UI -> CL : shows the list of the available products
deactivate UI

CL -> UI : chooses which product and which quantity to order
activate UI
UI -> CTRL : addProductToOrder(product, quantity)
activate CTRL
deactivate CTRL
UI -> CL : asks if the user is done adding more products
deactivate UI
end

CL -> UI : confirms that there is not more products
activate UI
deactivate CTRL

UI -> CL : asks if it is a home delivery or a store pick up
deactivate UI

CL -> UI : chooses the delivery type
activate UI
UI -> CTRL : newOrder(description, isHomeDelivery)
activate CTRL

CTRL -> OS** : create()
activate OS
OS -> ODB** : create()
deactivate OS
CTRL -> OS : order = addOrder(description, mapProducts, client, pharmacy, isHomeDelivery)
activate OS
OS -> O** : create(description, mapProducts, \nclient, pharmacy, isHomeDelivery)
activate O
O -> O : calculateAmount()
O -> O : calculateTotalWeight()
O -> C : addCredits(addtionalCredits)
activate C
deactivate C
deactivate O
deactivate OS
deactivate CTRL

UI -> CL : validates, presents the information with the \ntotal price of the order and asks for confirmation
deactivate UI

CL -> UI : confirms
activate UI
UI -> CTRL : lstCreditCards = getCreditCardsByClient(email)
activate CTRL
CTRL -> CS : lstCreditCards = getCreditCardsByClient(email)
activate CS
CS -> CDB : lstCreditCards = getCreditCardsByClient(email)
activate CDB
ref over CDB
SD_CONNECTIONS
end ref
deactivate CDB
deactivate CS
deactivate CTRL
deactivate CTRL
loop until the full amount is payed
UI -> CL : shows the list of his registered credit cards
deactivate UI

CL -> UI : chooses which credit card to use in order \npay the order and the amount for said card
activate UI
UI -> CTRL : addPayment(creditCard, amount)
activate CTRL
deactivate CTRL
end
UI -> CTRL : registerOrder()
activate CTRL
CTRL -> OS : registerOrder(order)
activate OS
OS -> ODB : registerOrder(order)
activate ODB
ref over ODB
SD_CONNECTIONS
end ref
deactivate ODB
deactivate OS
deactivate CTRL
UI -> CTRL : generateInvoice()
activate CTRL
CTRL -> INVCTRL** : create()
CTRL -> INVCTRL : generateInvoice(order, mapPayments)
activate INVCTRL
ref over INVCTRL
US26_SD
end ref
deactivate INVCTRL
UI -> CL : registers the order, generates the invoice\n and informs of the success of the operation
deactivate CTRL
deactivate UI
deactivate CL

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b765.40
Operating System: Windows 10
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>