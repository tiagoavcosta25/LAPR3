<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="760px" preserveAspectRatio="none" style="width:1582px;height:760px;" version="1.1" viewBox="0 0 1582 760" width="1582px" zoomAndPan="magnify"><defs><filter height="300%" id="felnof0eds0i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="556.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="29.5" y="97.6094"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="46.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="119.9609"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="457.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="197.0156"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="426.7734" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="227.3672"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="814" y="334.6797"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="934" y="395.0313"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="934" y="455.3828"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1073" y="257.7188"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1073" y="515.7344"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1457" y="546.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="34" x2="34" y1="87.6094" y2="672.1406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="317" x2="317" y1="87.6094" y2="672.1406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="655" x2="655" y1="87.6094" y2="672.1406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="819" x2="819" y1="87.6094" y2="672.1406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="939" x2="939" y1="87.6094" y2="672.1406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1078" x2="1078" y1="87.6094" y2="672.1406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1462" x2="1462" y1="299.0234" y2="672.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="8" y="84.5332">Courier</text><ellipse cx="34.5" cy="13" fill="#FEFECE" filter="url(#felnof0eds0i)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M34.5,21 L34.5,48 M21.5,29 L47.5,29 M34.5,48 L21.5,63 M34.5,48 L47.5,63 " fill="none" filter="url(#felnof0eds0i)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="8" y="685.6738">Courier</text><ellipse cx="34.5" cy="698.75" fill="#FEFECE" filter="url(#felnof0eds0i)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M34.5,706.75 L34.5,733.75 M21.5,714.75 L47.5,714.75 M34.5,733.75 L21.5,748.75 M34.5,733.75 L47.5,748.75 " fill="none" filter="url(#felnof0eds0i)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="243" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="250" y="72.5332">:FinishDeliveryRunUI</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="243" y="671.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="250" y="692.6738">:FinishDeliveryRunUI</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="556" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="563" y="72.5332">:FinishDeliveryRunController</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="556" y="671.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="563" y="692.6738">:FinishDeliveryRunController</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="765" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="772" y="72.5332">PotApplication</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="765" y="671.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="772" y="692.6738">PotApplication</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="883" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="923" y="54.9238">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="890" y="72.5332">:PotApplication</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="883" y="671.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="923" y="692.6738">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="890" y="710.2832">:PotApplication</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1005" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1022" y="54.9238">deliveryRunServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1012" y="72.5332">:DeliveryRunService</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1005" y="671.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1022" y="692.6738">deliveryRunServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1012" y="710.2832">:DeliveryRunService</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="1352" y="671.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="1359" y="692.6738">deliveryRunDB : DeliveryRunDB</text><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="556.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="29.5" y="97.6094"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="46.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="119.9609"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="457.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="197.0156"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="426.7734" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="650.5" y="227.3672"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="814" y="334.6797"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="934" y="395.0313"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="934" y="455.3828"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1073" y="257.7188"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1073" y="515.7344"/><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1457" y="546.0859"/><polygon fill="#A80036" points="300.5,115.9609,310.5,119.9609,300.5,123.9609,304.5,119.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="306.5" y1="119.9609" y2="119.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="46.5" y="115.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="57.5" y="115.1045">Starts the process to finish a Delivery Run</text><polygon fill="#A80036" points="50.5,162.6641,40.5,166.6641,50.5,170.6641,46.5,166.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="44.5" x2="316.5" y1="166.6641" y2="166.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="56.5" y="153.6318">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="67.5" y="145.4561">Asks for the Delivery Run ID and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="67.5" y="161.8076">the Scooter battery percentage</text><polygon fill="#A80036" points="300.5,193.0156,310.5,197.0156,300.5,201.0156,304.5,197.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="306.5" y1="197.0156" y2="197.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="46.5" y="192.1592">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="57.5" y="192.1592">Inserts the required infromation</text><polygon fill="#A80036" points="638.5,223.3672,648.5,227.3672,638.5,231.3672,642.5,227.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="322.5" x2="644.5" y1="227.3672" y2="227.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="329.5" y="222.5107">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="340.5" y="222.5107">finishDeliveryRun(deliveryRunID, batteryPercentage)</text><polygon fill="#A80036" points="1061,253.7188,1071,257.7188,1061,261.7188,1065,257.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="1067" y1="257.7188" y2="257.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="667.5" y="252.8623">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="678.5" y="252.8623">create()</text><polygon fill="#A80036" points="1340,284.0703,1350,288.0703,1340,292.0703,1344,288.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1078" x2="1346" y1="288.0703" y2="288.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1085" y="283.2139">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1096" y="283.2139">create()</text><rect fill="#FEFECE" filter="url(#felnof0eds0i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="1352" y="265.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="1359" y="287.252">deliveryRunDB : DeliveryRunDB</text><polygon fill="#A80036" points="802,330.6797,812,334.6797,802,338.6797,806,334.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="808" y1="334.6797" y2="334.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="667.5" y="329.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="678.5" y="329.8232">app = getInstance()</text><polygon fill="#A80036" points="922,391.0313,932,395.0313,922,399.0313,926,395.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="928" y1="395.0313" y2="395.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="667.5" y="390.1748">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="678.5" y="390.1748">session = getCurrentSession()</text><polygon fill="#A80036" points="922,451.3828,932,455.3828,922,459.3828,926,455.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="928" y1="455.3828" y2="455.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="667.5" y="450.5264">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="678.5" y="450.5264">email = getCurrentUserEmail()</text><polygon fill="#A80036" points="1061,511.7344,1071,515.7344,1061,519.7344,1065,515.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="660.5" x2="1067" y1="515.7344" y2="515.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="667.5" y="510.8779">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="685.5" y="510.8779">finishDeliveryRun(deliveryRunID, batteryPercentage, email)</text><polygon fill="#A80036" points="1445,542.0859,1455,546.0859,1445,550.0859,1449,546.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1083" x2="1451" y1="546.0859" y2="546.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1090" y="541.2295">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="1108" y="541.2295">finishDeliveryRun(deliveryRunID, batteryPercentage, email)</text><rect fill="#FFFFFF" filter="url(#felnof0eds0i)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="222" x="1349" y="584.0859"/><polygon fill="#EEEEEE" points="1349,584.0859,1411,584.0859,1411,592.0859,1401,602.0859,1349,602.0859,1349,584.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1362" y="599.5811">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1403" y="619.5811">SD_CONNECTIONS</text><polygon fill="#A80036" points="45.5,650.1406,35.5,654.1406,45.5,658.1406,41.5,654.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="39.5" x2="316.5" y1="654.1406" y2="654.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="51.5" y="649.2842">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="69.5" y="649.2842">Informs of the success of the operation</text><!--MD5=[f385773c6a00fbe5b149134dc7dbec7c]
@startuml
autonumber
actor "Courier" as C
participant ":FinishDeliveryRunUI" as UI
participant ":FinishDeliveryRunController" as CTRL
participant "PotApplication" as PA
participant "app \n:PotApplication" as APA
participant "deliveryRunServ \n:DeliveryRunService" as DRS
participant "deliveryRunDB : DeliveryRunDB" as DDB
activate C

C -> UI : Starts the process to finish a Delivery Run
activate UI

UI - -> C : Asks for the Delivery Run ID and \nthe Scooter battery percentage
deactivate UI

C -> UI : Inserts the required infromation
activate UI


UI -> CTRL : finishDeliveryRun(deliveryRunID, batteryPercentage)
activate CTRL
CTRL -> DRS : create()
activate DRS
DRS -> DDB** : create()
deactivate DRS
CTRL -> PA : app = getInstance()
activate PA
deactivate PA
CTRL -> APA : session = getCurrentSession()
activate APA
deactivate APA

CTRL -> APA : email = getCurrentUserEmail()
activate APA
deactivate APA
CTRL -> DRS : finishDeliveryRun(deliveryRunID, batteryPercentage, email)
activate DRS
DRS -> DDB : finishDeliveryRun(deliveryRunID, batteryPercentage, email)
ref over DDB
SD_CONNECTIONS
end ref
activate DDB
deactivate DDB
deactivate DRS

UI - -> C : Informs of the success of the operation
deactivate CTRL
deactivate UI
deactivate C

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b765.40
Operating System: Windows 10
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>