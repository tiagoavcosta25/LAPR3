<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="713px" preserveAspectRatio="none" style="width:1425px;height:713px;" version="1.1" viewBox="0 0 1425 713" width="1425px" zoomAndPan="magnify"><defs><filter height="300%" id="fxsvwoknvz7z4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="508.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="29.5" y="97.6094"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="46.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="119.9609"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="409.4219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="197.0156"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="379.0703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="496.5" y="227.3672"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="660" y="334.6797"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="395.0313"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="455.3828"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="257.7188"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="515.7344"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1303" y="546.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="34" x2="34" y1="87.6094" y2="624.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="317" x2="317" y1="87.6094" y2="624.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="501" x2="501" y1="87.6094" y2="624.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="665" x2="665" y1="87.6094" y2="624.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="785" x2="785" y1="87.6094" y2="624.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="924" x2="924" y1="87.6094" y2="624.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1308" x2="1308" y1="299.0234" y2="624.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="8" y="84.5332">Courier</text><ellipse cx="34.5" cy="13" fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M34.5,21 L34.5,48 M21.5,29 L47.5,29 M34.5,48 L21.5,63 M34.5,48 L47.5,63 " fill="none" filter="url(#fxsvwoknvz7z4)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="8" y="637.9707">Courier</text><ellipse cx="34.5" cy="651.0469" fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M34.5,659.0469 L34.5,686.0469 M21.5,667.0469 L47.5,667.0469 M34.5,686.0469 L21.5,701.0469 M34.5,686.0469 L47.5,701.0469 " fill="none" filter="url(#fxsvwoknvz7z4)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="243" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="250" y="72.5332">:FinishDeliveryRunUI</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="243" y="623.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="250" y="644.9707">:FinishDeliveryRunUI</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="402" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="409" y="72.5332">:FinishDeliveryRunController</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="402" y="623.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="409" y="644.9707">:FinishDeliveryRunController</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="611" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="618" y="72.5332">PotApplication</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="611" y="623.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="618" y="644.9707">PotApplication</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="729" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="769" y="54.9238">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="736" y="72.5332">:PotApplication</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="729" y="623.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="769" y="644.9707">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="736" y="662.5801">:PotApplication</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="851" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="868" y="54.9238">deliveryRunServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="858" y="72.5332">:DeliveryRunService</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="851" y="623.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="868" y="644.9707">deliveryRunServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="858" y="662.5801">:DeliveryRunService</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="1198" y="623.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="1205" y="644.9707">deliveryRunDB : DeliveryRunDB</text><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="508.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="29.5" y="97.6094"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="46.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="119.9609"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="409.4219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="197.0156"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="379.0703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="496.5" y="227.3672"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="660" y="334.6797"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="395.0313"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="455.3828"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="257.7188"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="515.7344"/><rect fill="#FFFFFF" filter="url(#fxsvwoknvz7z4)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1303" y="546.0859"/><polygon fill="#A80036" points="300.5,115.9609,310.5,119.9609,300.5,123.9609,304.5,119.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="306.5" y1="119.9609" y2="119.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="46.5" y="115.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="57.5" y="115.1045">Starts the process to finish a Delivery Run</text><polygon fill="#A80036" points="50.5,162.6641,40.5,166.6641,50.5,170.6641,46.5,166.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="44.5" x2="316.5" y1="166.6641" y2="166.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="56.5" y="153.6318">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="67.5" y="145.4561">Asks for the Delivery Run ID and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="67.5" y="161.8076">the Scooter battery percentage</text><polygon fill="#A80036" points="300.5,193.0156,310.5,197.0156,300.5,201.0156,304.5,197.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="306.5" y1="197.0156" y2="197.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="46.5" y="192.1592">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="57.5" y="192.1592">Inserts the required infromation</text><polygon fill="#A80036" points="484.5,223.3672,494.5,227.3672,484.5,231.3672,488.5,227.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="322.5" x2="490.5" y1="227.3672" y2="227.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="329.5" y="222.5107">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="340.5" y="222.5107">finishDeliveryRun()</text><polygon fill="#A80036" points="907,253.7188,917,257.7188,907,261.7188,911,257.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="913" y1="257.7188" y2="257.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="513.5" y="252.8623">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="524.5" y="252.8623">create()</text><polygon fill="#A80036" points="1186,284.0703,1196,288.0703,1186,292.0703,1190,288.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="1192" y1="288.0703" y2="288.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="931" y="283.2139">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="942" y="283.2139">create()</text><rect fill="#FEFECE" filter="url(#fxsvwoknvz7z4)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="1198" y="265.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="1205" y="287.252">deliveryRunDB : DeliveryRunDB</text><polygon fill="#A80036" points="648,330.6797,658,334.6797,648,338.6797,652,334.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="654" y1="334.6797" y2="334.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="513.5" y="329.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="524.5" y="329.8232">app = getInstance()</text><polygon fill="#A80036" points="768,391.0313,778,395.0313,768,399.0313,772,395.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="774" y1="395.0313" y2="395.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="513.5" y="390.1748">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="524.5" y="390.1748">session = getCurrentSession()</text><polygon fill="#A80036" points="768,451.3828,778,455.3828,768,459.3828,772,455.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="774" y1="455.3828" y2="455.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="513.5" y="450.5264">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="524.5" y="450.5264">email = getCurrentUserEmail()</text><polygon fill="#A80036" points="907,511.7344,917,515.7344,907,519.7344,911,515.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="913" y1="515.7344" y2="515.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="513.5" y="510.8779">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="531.5" y="510.8779">finishDeliveryRun(deliveryRunID, batteryPercentage, email)</text><polygon fill="#A80036" points="1291,542.0859,1301,546.0859,1291,550.0859,1295,546.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929" x2="1297" y1="546.0859" y2="546.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="936" y="541.2295">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="954" y="541.2295">finishDeliveryRun(deliveryRunID, batteryPercentage, email)</text><polygon fill="#A80036" points="45.5,602.4375,35.5,606.4375,45.5,610.4375,41.5,606.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="39.5" x2="316.5" y1="606.4375" y2="606.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="51.5" y="601.5811">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="69.5" y="601.5811">informs of the success of the operation</text><!--MD5=[5158051e717984709bb871453b6e3bd2]
@startuml
autonumber
actor "Courier" as C
participant ":FinishDeliveryRunUI" as UI
participant ":FinishDeliveryRunController" as CTRL
participant "PotApplication" as PA
participant "app \n:PotApplication" as APA
participant "deliveryRunServ \n:DeliveryRunService" as DRS
participant "deliveryRunDB : DeliveryRunDB" as DDB
activate C

C -> UI : Starts the process to finish a Delivery Run
activate UI

UI - -> C : Asks for the Delivery Run ID and \nthe Scooter battery percentage
deactivate UI

C -> UI : Inserts the required infromation
activate UI


UI -> CTRL : finishDeliveryRun()
activate CTRL
CTRL -> DRS : create()
activate DRS
DRS -> DDB** : create()
deactivate DRS
CTRL -> PA : app = getInstance()
activate PA
deactivate PA
CTRL -> APA : session = getCurrentSession()
activate APA
deactivate APA

CTRL -> APA : email = getCurrentUserEmail()
activate APA
deactivate APA
CTRL -> DRS : finishDeliveryRun(deliveryRunID, batteryPercentage, email)
activate DRS
DRS -> DDB : finishDeliveryRun(deliveryRunID, batteryPercentage, email)
activate DDB
deactivate DDB
deactivate DRS

UI - -> C : informs of the success of the operation
deactivate CTRL
deactivate UI
deactivate C

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b765.40
Operating System: Windows 10
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>