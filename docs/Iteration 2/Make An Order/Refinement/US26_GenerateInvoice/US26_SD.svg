<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1142px" preserveAspectRatio="none" style="width:1686px;height:1142px;" version="1.1" viewBox="0 0 1686 1142" width="1686px" zoomAndPan="magnify"><defs><filter height="300%" id="fafc8u46q0ti6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="1015.3047" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="24" y="97.6094"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="992.9531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="287" y="119.9609"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="884.5469" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="456" y="150.3125"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="612" y="180.6641"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="732" y="241.0156"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="732" y="301.3672"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848.5" y="361.7188"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="946" y="422.0703"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="946" y="590.4766"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="946" y="758.8828"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1060" y="482.4219"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1204.5" y="650.8281"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="100.5703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1353" y="819.2344"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1353" y="1004.8594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="29" x2="29" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="292" x2="292" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="461" x2="461" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="617" x2="617" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="737" x2="737" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="853" x2="853" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="951" x2="951" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1065" x2="1065" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1209" x2="1209" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1358" x2="1358" y1="87.6094" y2="1130.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1646" x2="1646" y1="869.3438" y2="1130.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="8" y="84.5332">Client</text><ellipse cx="29" cy="13" fill="#FEFECE" filter="url(#fafc8u46q0ti6)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M29,21 L29,48 M16,29 L42,29 M29,48 L16,63 M29,48 L42,63 " fill="none" filter="url(#fafc8u46q0ti6)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="225" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="232" y="72.5332">GenerateInvoiceUI</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="369" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="376" y="72.5332">GenerateInvoiceController</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="563" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="570" y="72.5332">PotApplication</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="681" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="723" y="54.9238">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="688" y="72.5332">:PotApplication</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="803" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="827.5" y="54.9238">session</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="810" y="72.5332">:UserSession</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="914" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="937.5" y="54.9238">plat</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="921" y="72.5332">:Platform</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="998" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1033.5" y="54.9238">clientReg</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1005" y="72.5332">:ClientRegistration</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="1142" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1177.5" y="54.9238">orderReg</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="1149" y="72.5332">:OrderRegistration</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="1287" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="1321" y="54.9238">invoiceReg</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="1294" y="72.5332">:InvoiceRegistration</text><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="1015.3047" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="24" y="97.6094"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="992.9531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="287" y="119.9609"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="884.5469" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="456" y="150.3125"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="612" y="180.6641"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="732" y="241.0156"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="732" y="301.3672"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848.5" y="361.7188"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="946" y="422.0703"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="946" y="590.4766"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="946" y="758.8828"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1060" y="482.4219"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1204.5" y="650.8281"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="100.5703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1353" y="819.2344"/><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1353" y="1004.8594"/><polygon fill="#A80036" points="275,115.9609,285,119.9609,275,123.9609,279,119.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="281" y1="119.9609" y2="119.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="41" y="115.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="52" y="115.1045">sends a request to generate an invoice</text><polygon fill="#A80036" points="444,146.3125,454,150.3125,444,154.3125,448,150.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="450" y1="150.3125" y2="150.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="304" y="145.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="315" y="145.4561">generateInvoice()</text><polygon fill="#A80036" points="600,176.6641,610,180.6641,600,184.6641,604,180.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="606" y1="180.6641" y2="180.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="175.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="484" y="175.8076">app = getInstance()</text><polygon fill="#A80036" points="720,237.0156,730,241.0156,720,245.0156,724,241.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="726" y1="241.0156" y2="241.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="236.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="484" y="236.1592">plat = getPlaform()</text><polygon fill="#A80036" points="720,297.3672,730,301.3672,720,305.3672,724,301.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="726" y1="301.3672" y2="301.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="296.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="484" y="296.5107">session = getCurrentSession()</text><polygon fill="#A80036" points="836.5,357.7188,846.5,361.7188,836.5,365.7188,840.5,361.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="842.5" y1="361.7188" y2="361.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="356.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="484" y="356.8623">email = getUserEmail()</text><polygon fill="#A80036" points="934,418.0703,944,422.0703,934,426.0703,938,422.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="940" y1="422.0703" y2="422.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="417.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="484" y="417.2139">clienteReg = getClientReg()</text><polygon fill="#A80036" points="1048,478.4219,1058,482.4219,1048,486.4219,1052,482.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1054" y1="482.4219" y2="482.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="477.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="484" y="477.5654">client = getUserByEmail(email)</text><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="136" x="995" y="520.4219"/><polygon fill="#EEEEEE" points="995,520.4219,1057,520.4219,1057,528.4219,1047,538.4219,995,538.4219,995,520.4219" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1008" y="535.917">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1006" y="555.917">SD_CONNECTIONS</text><polygon fill="#A80036" points="934,586.4766,944,590.4766,934,594.4766,938,590.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="940" y1="590.4766" y2="590.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="585.6201">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="484" y="585.6201">ordReg = getOrderReg()</text><polygon fill="#A80036" points="1192.5,646.8281,1202.5,650.8281,1192.5,654.8281,1196.5,650.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1198.5" y1="650.8281" y2="650.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="645.9717">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="491" y="645.9717">order = getLatestOrder(client)</text><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="137" x="1139" y="688.8281"/><polygon fill="#EEEEEE" points="1139,688.8281,1201,688.8281,1201,696.8281,1191,706.8281,1139,706.8281,1139,688.8281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1152" y="704.3232">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1150.5" y="724.3232">SD_CONNECTIONS</text><polygon fill="#A80036" points="934,754.8828,944,758.8828,934,762.8828,938,758.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="940" y1="758.8828" y2="758.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="754.0264">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="491" y="754.0264">invoiceReg = getInvoiceReg()</text><polygon fill="#A80036" points="1341,815.2344,1351,819.2344,1341,823.2344,1345,819.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1347" y1="819.2344" y2="819.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="814.3779">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="491" y="814.3779">invoice = addInvoice(date, totalPrice, order, client)</text><polygon fill="#A80036" points="1601,845.5859,1611,849.5859,1601,853.5859,1605,849.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1363" x2="1607" y1="849.5859" y2="849.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1370" y="844.7295">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1388" y="844.7295">create(date, totalPrice, order, client)</text><rect fill="#FEFECE" filter="url(#fafc8u46q0ti6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="1613" y="827.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="1622" y="848.7676">invoice</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="1620" y="866.377">:Invoice</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1363" x2="1405" y1="918.8047" y2="918.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1405" x2="1405" y1="918.8047" y2="931.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1358" x2="1405" y1="931.8047" y2="931.8047"/><polygon fill="#A80036" points="1368,927.8047,1358,931.8047,1368,935.8047,1364,931.8047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1370" y="913.9482">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="1388" y="913.9482">validateOrder(invoice)</text><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="144" x="1284" y="934.8047"/><polygon fill="#EEEEEE" points="1284,934.8047,1346,934.8047,1346,942.8047,1336,952.8047,1284,952.8047,1284,934.8047" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1297" y="950.2998">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1299" y="970.2998">SD_CONNECTIONS</text><polygon fill="#A80036" points="1341,1000.8594,1351,1004.8594,1341,1008.8594,1345,1004.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1347" y1="1004.8594" y2="1004.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="1000.0029">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="491" y="1000.0029">registerInvoice(invoice)</text><rect fill="#FFFFFF" filter="url(#fafc8u46q0ti6)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="144" x="1284" y="1042.8594"/><polygon fill="#EEEEEE" points="1284,1042.8594,1346,1042.8594,1346,1050.8594,1336,1060.8594,1284,1060.8594,1284,1042.8594" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1297" y="1058.3545">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1299" y="1078.3545">SD_CONNECTIONS</text><polygon fill="#A80036" points="40,1108.9141,30,1112.9141,40,1116.9141,36,1112.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="291" y1="1112.9141" y2="1112.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="46" y="1108.0576">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="64" y="1108.0576">sends the invoice</text><!--MD5=[3948ab10955f3232ef0d1cf03bc02f1e]
@startuml
autonumber
hide footbox

actor "Client" as CL

participant "GenerateInvoiceUI" as UI
participant "GenerateInvoiceController" as CTRL
participant "PotApplication" as _APP
participant "app\n:PotApplication" as APP
participant "session\n:UserSession" as SESSION
participant "plat\n:Platform" as PLAT
participant "clientReg\n:ClientRegistration" as CR
participant "orderReg\n:OrderRegistration" as OR
participant "invoiceReg\n:InvoiceRegistration" as IR
participant "invoice\n:Invoice" as I

activate CL

CL -> UI : sends a request to generate an invoice
activate UI
UI -> CTRL : generateInvoice()
activate CTRL
CTRL -> _APP: app = getInstance()
activate _APP
deactivate _APP

CTRL -> APP: plat = getPlaform()
activate APP
deactivate APP

CTRL -> APP: session = getCurrentSession()
activate APP
deactivate APP

CTRL -> SESSION: email = getUserEmail()
activate SESSION
deactivate SESSION
CTRL -> PLAT : clienteReg = getClientReg()
activate PLAT
deactivate PLAT
CTRL -> CR : client = getUserByEmail(email)
activate CR
ref over CR
SD_CONNECTIONS
end ref
deactivate CR

CTRL -> PLAT : ordReg = getOrderReg()
activate PLAT
deactivate PLAT
CTRL -> OR : order = getLatestOrder(client)
activate OR
ref over OR
SD_CONNECTIONS
end ref
deactivate OR

CTRL -> PLAT : invoiceReg = getInvoiceReg()
activate PLAT
deactivate PLAT

CTRL -> IR : invoice = addInvoice(date, totalPrice, order, client)
activate IR
IR -> I** : create(date, totalPrice, order, client)
IR -> IR : validateOrder(invoice)
ref over IR
SD_CONNECTIONS
end ref
deactivate IR

CTRL -> IR : registerInvoice(invoice)
activate IR
ref over IR
SD_CONNECTIONS
end ref
deactivate IR
deactivate CTRL
UI -> CL : sends the invoice
deactivate UI
deactivate CL

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b520.66
Operating System: Windows 10
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>