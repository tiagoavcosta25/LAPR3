<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1334px" preserveAspectRatio="none" style="width:1938px;height:1334px;" version="1.1" viewBox="0 0 1938 1334" width="1938px" zoomAndPan="magnify"><defs><filter height="300%" id="f1r6irikmtydus" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="1206.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="24" y="97.6094"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="1184.5625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="287" y="119.9609"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="1076.1563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="456" y="150.3125"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="612" y="180.6641"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="732" y="241.0156"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848.5" y="301.3672"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="961.5" y="371.7188"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="961.5" y="490.1563"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1181.5" y="520.5078"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1283" y="638.5625"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1283" y="757"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1500" y="787.3516"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1605.5" y="905.4063"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1605.5" y="1023.8438"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1605.5" y="1166.1172"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1781.5" y="1196.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="29" x2="29" y1="87.6094" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="292" x2="292" y1="87.6094" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="461" x2="461" y1="87.6094" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="617" x2="617" y1="87.6094" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="737" x2="737" y1="87.6094" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="853" x2="853" y1="87.6094" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="966" x2="966" y1="381.4766" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1186" x2="1186" y1="445.6953" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1288" x2="1288" y1="648.3203" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1505" x2="1505" y1="712.5391" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1610" x2="1610" y1="915.1641" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1786" x2="1786" y1="979.3828" y2="1322.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1898.5" x2="1898.5" y1="1073.9531" y2="1322.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="8" y="84.5332">Client</text><ellipse cx="29" cy="13" fill="#FEFECE" filter="url(#f1r6irikmtydus)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M29,21 L29,48 M16,29 L42,29 M29,48 L16,63 M29,48 L42,63 " fill="none" filter="url(#f1r6irikmtydus)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="225" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="232" y="72.5332">GenerateInvoiceUI</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="369" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="376" y="72.5332">GenerateInvoiceController</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="563" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="570" y="72.5332">PotApplication</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="681" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="723" y="54.9238">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="688" y="72.5332">:PotApplication</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="803" y="33.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="827.5" y="54.9238">session</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="810" y="72.5332">:UserSession</text><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="1206.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="24" y="97.6094"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="1184.5625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="287" y="119.9609"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="1076.1563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="456" y="150.3125"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="612" y="180.6641"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="732" y="241.0156"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848.5" y="301.3672"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="961.5" y="371.7188"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="961.5" y="490.1563"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1181.5" y="520.5078"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1283" y="638.5625"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1283" y="757"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1500" y="787.3516"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="54.2188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1605.5" y="905.4063"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1605.5" y="1023.8438"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1605.5" y="1166.1172"/><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1781.5" y="1196.4688"/><polygon fill="#A80036" points="275,115.9609,285,119.9609,275,123.9609,279,119.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="281" y1="119.9609" y2="119.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="41" y="115.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="52" y="115.1045">sends a request to generate an invoice</text><polygon fill="#A80036" points="444,146.3125,454,150.3125,444,154.3125,448,150.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="450" y1="150.3125" y2="150.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="304" y="145.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="315" y="145.4561">generateInvoice()</text><polygon fill="#A80036" points="600,176.6641,610,180.6641,600,184.6641,604,180.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="606" y1="180.6641" y2="180.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="175.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="484" y="175.8076">app = getInstance()</text><polygon fill="#A80036" points="720,237.0156,730,241.0156,720,245.0156,724,241.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="726" y1="241.0156" y2="241.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="236.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="484" y="236.1592">session = getCurrentSession()</text><polygon fill="#A80036" points="836.5,297.3672,846.5,301.3672,836.5,305.3672,840.5,301.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="842.5" y1="301.3672" y2="301.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="296.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="484" y="296.5107">email = getUserEmail()</text><polygon fill="#A80036" points="902,357.7188,912,361.7188,902,365.7188,906,361.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="908" y1="361.7188" y2="361.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="356.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="484" y="356.8623">create()</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="914" y="339.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="933.5" y="360.9004">clientServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="921" y="378.5098">:ClientService</text><polygon fill="#A80036" points="1136,421.9375,1146,425.9375,1136,429.9375,1140,425.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="1142" y1="425.9375" y2="425.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="973.5" y="421.0811">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="984.5" y="421.0811">create()</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="1148" y="403.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="1158.5" y="425.1191">clientDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1155" y="442.7285">:ClientDB</text><polygon fill="#A80036" points="949.5,486.1563,959.5,490.1563,949.5,494.1563,953.5,490.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="955.5" y1="490.1563" y2="490.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="473" y="485.2998">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="484" y="485.2998">client = getUserByEmail(email)</text><polygon fill="#A80036" points="1169.5,516.5078,1179.5,520.5078,1169.5,524.5078,1173.5,520.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971.5" x2="1175.5" y1="520.5078" y2="520.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="978.5" y="515.6514">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="989.5" y="515.6514">client = getUserByEmail(email)</text><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1145" y="558.5078"/><polygon fill="#EEEEEE" points="1145,558.5078,1207,558.5078,1207,566.5078,1197,576.5078,1145,576.5078,1145,558.5078" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1158" y="574.0029">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1151" y="594.0029">SD_CONNECTIONS</text><polygon fill="#A80036" points="1223,624.5625,1233,628.5625,1223,632.5625,1227,628.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1229" y1="628.5625" y2="628.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="623.7061">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="491" y="623.7061">create()</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="1235" y="606.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="1254.5" y="627.7441">orderServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="1242" y="645.3535">:OrderService</text><polygon fill="#A80036" points="1454,688.7813,1464,692.7813,1454,696.7813,1458,692.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1288" x2="1460" y1="692.7813" y2="692.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1295" y="687.9248">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1313" y="687.9248">create()</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="1466" y="670.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1476.5" y="691.9629">orderDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1473" y="709.5723">:OrderDB</text><polygon fill="#A80036" points="1271,753,1281,757,1271,761,1275,757" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1277" y1="757" y2="757"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="752.1436">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="491" y="752.1436">order = getLatestOrder(client)</text><polygon fill="#A80036" points="1488,783.3516,1498,787.3516,1488,791.3516,1492,787.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1293" x2="1494" y1="787.3516" y2="787.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1300" y="782.4951">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1318" y="782.4951">order = getLatestOrder(client)</text><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1463" y="825.3516"/><polygon fill="#EEEEEE" points="1463,825.3516,1525,825.3516,1525,833.3516,1515,843.3516,1463,843.3516,1463,825.3516" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1476" y="840.8467">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1469" y="860.8467">SD_CONNECTIONS</text><polygon fill="#A80036" points="1542,891.4063,1552,895.4063,1542,899.4063,1546,895.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1548" y1="895.4063" y2="895.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="890.5498">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="491" y="890.5498">create()</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="1554" y="873.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="1572" y="894.5879">invoiceServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="1561" y="912.1973">:InvoiceService</text><polygon fill="#A80036" points="1732,955.625,1742,959.625,1732,963.625,1736,959.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1738" y1="959.625" y2="959.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1617.5" y="954.7686">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1635.5" y="954.7686">create()</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1744" y="937.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="1753" y="958.8066">invoiceDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1751" y="976.416">:InvoiceDB</text><polygon fill="#A80036" points="1593.5,1019.8438,1603.5,1023.8438,1593.5,1027.8438,1597.5,1023.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1599.5" y1="1023.8438" y2="1023.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="1018.9873">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="491" y="1018.9873">invoice = addInvoice(date, totalPrice, order, client)</text><polygon fill="#A80036" points="1853.5,1050.1953,1863.5,1054.1953,1853.5,1058.1953,1857.5,1054.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1859.5" y1="1054.1953" y2="1054.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1617.5" y="1049.3389">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1635.5" y="1049.3389">create(date, totalPrice, order, client)</text><rect fill="#FEFECE" filter="url(#f1r6irikmtydus)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="1865.5" y="1031.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="1874.5" y="1053.377">invoice</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="1872.5" y="1070.9863">:Invoice</text><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1551" y="1096.0625"/><polygon fill="#EEEEEE" points="1551,1096.0625,1613,1096.0625,1613,1104.0625,1603,1114.0625,1551,1114.0625,1551,1096.0625" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1564" y="1111.5576">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1557" y="1131.5576">SD_CONNECTIONS</text><polygon fill="#A80036" points="1593.5,1162.1172,1603.5,1166.1172,1593.5,1170.1172,1597.5,1166.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="1599.5" y1="1166.1172" y2="1166.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="473" y="1161.2607">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="491" y="1161.2607">registerInvoice(invoice)</text><polygon fill="#A80036" points="1769.5,1192.4688,1779.5,1196.4688,1769.5,1200.4688,1773.5,1196.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1615.5" x2="1775.5" y1="1196.4688" y2="1196.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1622.5" y="1191.6123">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1640.5" y="1191.6123">registerInvoice(invoice)</text><rect fill="#FFFFFF" filter="url(#f1r6irikmtydus)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="1741" y="1234.4688"/><polygon fill="#EEEEEE" points="1741,1234.4688,1803,1234.4688,1803,1242.4688,1793,1252.4688,1741,1252.4688,1741,1234.4688" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="1754" y="1249.9639">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1747" y="1269.9639">SD_CONNECTIONS</text><polygon fill="#A80036" points="40,1300.5234,30,1304.5234,40,1308.5234,36,1304.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="34" x2="291" y1="1304.5234" y2="1304.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="46" y="1299.667">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="64" y="1299.667">sends the invoice</text><!--MD5=[7895650eda36fb7d5d20270343fce697]
@startuml
autonumber
hide footbox

actor "Client" as CL

participant "GenerateInvoiceUI" as UI
participant "GenerateInvoiceController" as CTRL
participant "PotApplication" as _APP
participant "app\n:PotApplication" as APP
participant "session\n:UserSession" as SESSION
participant "clientServ\n:ClientService" as CS
participant "clientDB\n:ClientDB" as CDB
participant "orderServ\n:OrderService" as OS
participant "orderDB\n:OrderDB" as ODB
participant "invoiceServ\n:InvoiceService" as IS
participant "invoiceDB\n:InvoiceDB" as IDB
participant "invoice\n:Invoice" as I

activate CL

CL -> UI : sends a request to generate an invoice
activate UI
UI -> CTRL : generateInvoice()
activate CTRL
CTRL -> _APP: app = getInstance()
activate _APP
deactivate _APP

CTRL -> APP: session = getCurrentSession()
activate APP
deactivate APP

CTRL -> SESSION: email = getUserEmail()
activate SESSION
deactivate SESSION
CTRL -> CS** : create()
activate CS
CS -> CDB** : create()
deactivate CS
CTRL -> CS : client = getUserByEmail(email)
activate CS
CS -> CDB : client = getUserByEmail(email)
activate CDB
ref over CDB
SD_CONNECTIONS
end ref
deactivate CDB
deactivate CS

CTRL -> OS** : create()
activate OS
OS -> ODB** : create()
deactivate OS
CTRL -> OS : order = getLatestOrder(client)
activate OS
OS -> ODB : order = getLatestOrder(client)
activate ODB
ref over ODB
SD_CONNECTIONS
end ref
deactivate ODB
deactivate OS

CTRL -> IS** : create()
activate IS
IS -> IDB** : create()
deactivate IS

CTRL -> IS : invoice = addInvoice(date, totalPrice, order, client)
activate IS
IS -> I** : create(date, totalPrice, order, client)
ref over IS
SD_CONNECTIONS
end ref
deactivate IS

CTRL -> IS : registerInvoice(invoice)
activate IS
IS -> IDB : registerInvoice(invoice)
activate IDB
ref over IDB
SD_CONNECTIONS
end ref
deactivate IDB
deactivate IS
deactivate CTRL
UI -> CL : sends the invoice
deactivate UI
deactivate CL

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b520.66
Operating System: Windows 10
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>