<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="732px" preserveAspectRatio="none" style="width:1119px;height:732px;" version="1.1" viewBox="0 0 1119 732" width="1119px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cfphnkwflz5u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="501.1719" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="234" y="105.9219"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="76.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="281.0625"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="452.1719"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="546.7422"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906" y="327.7656"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906" y="577.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="239" x2="239" y1="57.2188" y2="672.7969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="575" x2="575" y1="156.0313" y2="672.7969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="911" x2="911" y1="220.25" y2="672.7969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1042" x2="1042" y1="502.2813" y2="672.7969"/><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="117" y="20.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="226" x="124" y="42.1426">:MakeAPharmacyTransferController</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="117" y="671.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="226" x="124" y="693.3301">:MakeAPharmacyTransferController</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="509" y="671.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="536.5" y="693.3301">pharmServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="516" y="710.9395">:PharmacyService</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="859" y="671.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="868.5" y="693.3301">pharamcyDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="866" y="710.9395">:PharmacyDB</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="973" y="671.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="982.5" y="693.3301">pharmacyTransfer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="980" y="710.9395">:PharmacyTransfer</text><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="501.1719" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="234" y="105.9219"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="76.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="281.0625"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="452.1719"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="60.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="546.7422"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906" y="327.7656"/><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906" y="577.0938"/><ellipse cx="10.5" cy="105.1719" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="222,101.9219,232,105.9219,222,109.9219,226,105.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="228" y1="105.9219" y2="105.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="18" y="92.8896">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="29" y="84.7139">getStockFromAnotherPharamacy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="29" y="101.0654">(order, product, quantity)</text><polygon fill="#A80036" points="497,132.2734,507,136.2734,497,140.2734,501,136.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244" x2="503" y1="136.2734" y2="136.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="251" y="131.417">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="262" y="131.417">create()</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="509" y="113.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="536.5" y="135.4551">pharmServ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="516" y="153.0645">:PharmacyService</text><polygon fill="#A80036" points="847,196.4922,857,200.4922,847,204.4922,851,200.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244" x2="853" y1="200.4922" y2="200.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="251" y="195.6357">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="262" y="195.6357">create()</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="859" y="178.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="868.5" y="199.6738">pharamcyDB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="866" y="217.2832">:PharmacyDB</text><polygon fill="#A80036" points="558,277.0625,568,281.0625,558,285.0625,562,281.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244" x2="564" y1="281.0625" y2="281.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="251" y="268.0303">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="262" y="259.8545">nearbyPharamcy = getClosestPharmacyWithStock</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="262" y="276.2061">(pharmacy, product, quantity)</text><polygon fill="#A80036" points="894,323.7656,904,327.7656,894,331.7656,898,327.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="900" y1="327.7656" y2="327.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587" y="314.7334">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="598" y="306.5576">nearbyPharamcy = getClosestPharmacyWithStock</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="598" y="322.9092">(pharmacy, product, quantity)</text><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="856" y="365.7656"/><polygon fill="#EEEEEE" points="856,365.7656,918,365.7656,918,373.7656,908,383.7656,856,383.7656,856,365.7656" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="869" y="381.2607">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="862" y="401.2607">SD_CONNECTIONS</text><polygon fill="#A80036" points="558,448.1719,568,452.1719,558,456.1719,562,452.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244" x2="564" y1="452.1719" y2="452.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="251" y="439.1396">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="262" y="430.9639">newPharamacyTransfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="262" y="447.3154">(order, product, quantity, nearbyPharamcy)</text><polygon fill="#A80036" points="961,478.5234,971,482.5234,961,486.5234,965,482.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="575" x2="967" y1="482.5234" y2="482.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="582" y="477.667">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="593" y="477.667">create(order, product, quantity, nearbyPharamcy)</text><rect fill="#FEFECE" filter="url(#f1cfphnkwflz5u)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="973" y="460.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="982.5" y="481.7051">pharmacyTransfer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="980" y="499.3145">:PharmacyTransfer</text><polygon fill="#A80036" points="558,542.7422,568,546.7422,558,550.7422,562,546.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244" x2="564" y1="546.7422" y2="546.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="251" y="541.8857">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="262" y="541.8857">registersPharmacyTransfer(pharmacyTransfer)</text><polygon fill="#A80036" points="894,573.0938,904,577.0938,894,581.0938,898,577.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="900" y1="577.0938" y2="577.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587" y="572.2373">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="598" y="572.2373">registersPharmacyTransfer(pharmacyTransfer)</text><rect fill="#FFFFFF" filter="url(#f1cfphnkwflz5u)" height="42.7031" style="stroke: #000000; stroke-width: 2.0;" width="126" x="856" y="615.0938"/><polygon fill="#EEEEEE" points="856,615.0938,918,615.0938,918,623.0938,908,633.0938,856,633.0938,856,615.0938" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="869" y="630.5889">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="862" y="650.5889">SD_CONNECTIONS</text><!--MD5=[0c0e0a414ac91232d99ade093074f2d0]
@startuml
autonumber
participant ":MakeAPharmacyTransferController" as CTRL
participant "pharmServ \n:PharmacyService" as PS
participant "pharamcyDB\n:PharmacyDB" as PDB
participant "pharmacyTransfer\n:PharmacyTransfer" as PT

[o-> CTRL : getStockFromAnotherPharamacy\n(order, product, quantity)
activate CTRL
CTRL -> PS** : create()
CTRL -> PDB** : create()
CTRL -> PS : nearbyPharamcy = getClosestPharmacyWithStock\n(pharmacy, product, quantity)
activate PS
PS -> PDB : nearbyPharamcy = getClosestPharmacyWithStock\n(pharmacy, product, quantity)
activate PDB
ref over PDB
SD_CONNECTIONS
end ref
deactivate PDB
deactivate PS

CTRL -> PS : newPharamacyTransfer\n(order, product, quantity, nearbyPharamcy)
activate PS
PS -> PT** : create(order, product, quantity, nearbyPharamcy)
deactivate PS

CTRL -> PS : registersPharmacyTransfer(pharmacyTransfer)
activate PS
PS -> PDB : registersPharmacyTransfer(pharmacyTransfer)
activate PDB
ref over PDB
SD_CONNECTIONS
end ref
deactivate PDB
deactivate PS
deactivate CTRL

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+8-b520.66
Operating System: Windows 10
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>